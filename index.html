<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P.W. - Politic World ВПИ</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .dark-theme {
            background: linear-gradient(135deg, #0c1445 0%, #1a237e 50%, #283593 100%);
            color: #e8eaf6;
        }

        .light-theme {
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 50%, #B0E0E6 100%);
            color: #2c3e50;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .clouds {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(calc(100vw + 100px)); }
        }

        .container {
            max-width: 100%;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .dark-theme .header {
            border-bottom-color: rgba(255,255,255,0.1);
        }

        .light-theme .header {
            border-bottom-color: rgba(0,0,0,0.1);
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(45deg, #7986cb, #3949ab);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .light-theme .logo {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .version {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 0.8em;
            opacity: 0.5;
            z-index: 1000;
        }

        .admin-panel {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .admin-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 30px;
        }

        .admin-btn {
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            color: inherit;
            text-decoration: none;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .admin-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .chats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
        }

        .chat-btn {
            padding: 15px 10px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: inherit;
            text-decoration: none;
            text-align: center;
            font-size: 0.9em;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .dark-theme .chat-btn {
            color: #c5cae9;
        }

        .light-theme .chat-btn {
            color: #2c3e50;
            background: rgba(255,255,255,0.3);
            border: 1px solid rgba(0,0,0,0.1);
        }

        .chat-btn:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .all-chats-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #5c6bc0, #3949ab);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1em;
            text-align: center;
            text-decoration: none;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .light-theme .all-chats-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
        }

        .all-chats-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(57, 73, 171, 0.4);
        }

        .game-section {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        .light-theme .game-section {
            background: rgba(255,255,255,0.3);
            border: 1px solid rgba(0,0,0,0.1);
        }

        .game-title {
            text-align: center;
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #7986cb;
        }

        .light-theme .game-title {
            color: #2c3e50;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        .dark-theme .form-group label {
            color: #c5cae9;
        }

        .light-theme .form-group label {
            color: #2c3e50;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: inherit;
            font-size: 1em;
        }

        .light-theme .form-group input, 
        .light-theme .form-group select, 
        .light-theme .form-group textarea {
            background: rgba(255,255,255,0.5);
            border: 1px solid rgba(0,0,0,0.2);
            color: #2c3e50;
        }

        .form-group textarea {
            height: 80px;
            resize: vertical;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #66bb6a, #4caf50);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .music-controls {
            position: fixed;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .music-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: white;
            font-size: 1.2em;
        }

        .music-btn:hover {
            transform: scale(1.1);
            background: rgba(76, 175, 80, 0.7);
        }

        .music-btn.muted {
            background: rgba(244, 67, 54, 0.7);
        }

        .form-note {
            text-align: center;
            font-size: 0.9em;
            opacity: 0.7;
            margin-top: 10px;
        }

        .anketa-header {
            text-align: center;
            font-size: 1.3em;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ffd700, #ff6b00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        .chat-interface {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            display: none;
        }

        .light-theme .chat-interface {
            background: rgba(255,255,255,0.3);
        }

        .messages-container {
            height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 15px;
        }

        .light-theme .messages-container {
            border-color: rgba(0,0,0,0.2);
        }

        .message-input {
            display: flex;
            gap: 10px;
        }

        .message-input input {
            flex: 1;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: inherit;
        }

        .light-theme .message-input input {
            background: rgba(255,255,255,0.5);
            border-color: rgba(0,0,0,0.2);
        }

        .send-btn {
            padding: 12px 20px;
            background: linear-gradient(45deg, #5c6bc0, #3949ab);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
        }

        .light-theme .send-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
        }

        .war-interface, .economy-interface, .profile-interface {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            display: none;
        }

        .light-theme .war-interface,
        .light-theme .economy-interface,
        .light-theme .profile-interface {
            background: rgba(255,255,255,0.3);
        }
    </style>
</head>
<body class="dark-theme">
    <div class="stars" id="stars"></div>
    <div class="clouds" id="clouds" style="display: none;"></div>

    <button class="theme-toggle" id="themeToggle">🌙</button>
    <div class="version">Alpha 11.0</div>

    <div class="container">
        <div class="header">
            <div class="logo">P.W.</div>
            <div class="welcome">Добро пожаловать в P.W.</div>
        </div>

        <div class="admin-section">
            <a href="https://t.me/OksikWizer" class="admin-btn" target="_blank">
                Связь с главным админом
            </a>
            <a href="https://t.me/SchattenKaiser_0" class="admin-btn" target="_blank">
                Тех. поддержка
            </a>
        </div>

        <button class="all-chats-btn" id="allChatsBtn">
            📋 Все чаты проекта
        </button>

        <div class="chats-grid" id="chatsGrid"></div>

        <div class="game-section">
            <div class="anketa-header">⚡🌍 АНКЕТА 🌍⚡</div>
            <form id="gameForm">
                <div class="form-group">
                    <label for="name">1. Ваше имя:</label>
                    <input type="text" id="name" required>
                </div>
                
                <div class="form-group">
                    <label for="age">2. Сколько вам лет:</label>
                    <input type="number" id="age" required>
                </div>
                
                <div class="form-group">
                    <label for="location">3. Где живёте (страна, город):</label>
                    <input type="text" id="location" required>
                </div>

                <div class="form-group">
                    <label for="countryName">4. Название вашей страны:</label>
                    <input type="text" id="countryName" required>
                </div>

                <div class="form-group">
                    <label for="flag">5. Флаг вашей страны (ссылка на фото):</label>
                    <input type="url" id="flag" placeholder="https://example.com/flag.jpg">
                </div>

                <div class="form-group">
                    <label for="currency">6. Название валюты вашей страны:</label>
                    <input type="text" id="currency" required>
                </div>

                <div class="form-group">
                    <label for="president">7. Президент вашей страны:</label>
                    <input type="text" id="president" required>
                </div>

                <div class="form-group">
                    <label for="politics">8. Политика вашей страны:</label>
                    <textarea id="politics" required></textarea>
                </div>

                <div class="form-group">
                    <label for="territory">9. Территория вашей страны (ссылка на фото):</label>
                    <input type="url" id="territory" placeholder="https://example.com/map.jpg">
                </div>

                <div class="form-group">
                    <label for="capital">10. Название столицы вашей страны:</label>
                    <input type="text" id="capital" required>
                </div>

                <div class="form-group">
                    <label for="experience">11. Был ли у вас опыт рп в похожем проекте?:</label>
                    <textarea id="experience" required placeholder="Ответьте подробно на вопрос"></textarea>
                </div>

                <div class="form-group">
                    <label for="username">12. Ваш юзернейм (@example):</label>
                    <input type="text" id="username" required placeholder="@username">
                </div>

                <div class="form-group">
                    <label for="peoples">13. Какие народы проживают у вас в стране?:</label>
                    <textarea id="peoples" required></textarea>
                </div>

                <div class="form-group">
                    <label for="population">14. Сколько людей проживают в вашей стране?:</label>
                    <input type="text" id="population" required placeholder="Например: 10 миллионов">
                </div>

                <div class="form-group">
                    <label for="languages">15. Какие у вас государственные языки в стране?:</label>
                    <input type="text" id="languages" required>
                </div>

                <div class="form-group">
                    <label for="countryCode">16. Код вашей страны (Трёхзначный из букв):</label>
                    <input type="text" id="countryCode" required placeholder="RUS" maxlength="3">
                </div>

                <div class="form-group">
                    <label for="capitalMap">17. Покажите на карте вашего государства столицу (фото):</label>
                    <input type="url" id="capitalMap" placeholder="https://example.com/capital-map.jpg">
                </div>

                <button type="submit" class="submit-btn">🎯 Отправить заявку админу</button>
                
                <div class="form-note">
                    Вашу анкету может принять только администратор проекта. (👍/👎)
                </div>
            </form>
        </div>

        <div class="chat-interface" id="chatInterface">
            <h3 id="currentChatName">Чат</h3>
            <div class="messages-container" id="messagesContainer"></div>
            <div class="message-input">
                <input type="text" id="messageInput" placeholder="Введите сообщение...">
                <button class="send-btn" id="sendMessageBtn">Отправить</button>
            </div>
        </div>

        <div class="war-interface" id="warInterface">
            <h3>⚔️ Система войн</h3>
            <p>Функционал в разработке...</p>
        </div>

        <div class="economy-interface" id="economyInterface">
            <h3>💰 Экономика</h3>
            <p>Функционал в разработке...</p>
        </div>

        <div class="profile-interface" id="profileInterface">
            <h3>👤 Профиль</h3>
            <p>Функционал в разработке...</p>
        </div>
    </div>

    <div class="music-controls">
        <button class="music-btn" id="playBtn">🎵</button>
        <button class="music-btn" id="muteBtn">🔇</button>
    </div>

    <audio id="backgroundMusic" loop autoplay>
        <source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Hammock/Everything_and_Nothing/Hammock_-_01_-_Clarity.mp3" type="audio/mpeg">
    </audio>

    <script>
        const SUPABASE_URL = 'https://bthzclsnjjcztmizbcxz.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ0aHpjbHNuampjenRtaXpiY3h6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MzUwOTYsImV4cCI6MjA3NjIxMTA5Nn0.axcQgx9kt2AGJT7joutknUjvoDd71Hu5j6luzwZkY0g';
        
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        let tg = Telegram.WebApp;
        
        tg.expand();
        tg.enableClosingConfirmation();
        tg.setHeaderColor('#1a237e');
        tg.backgroundColor = '#1a237e';

        const chats = [
            "Карты", "Армии стран", "Даты", "НРП ЧАТ (общий)", "Правила Проекта",
            "Новолжская Федерация", "Интервидение EBU", "АРА", "РС", "АФД",
            "Рейспакт", "Валюты стран", "Республика Фиррия", "РФ", "ФСИМР",
            "КФ", "КНГ", "ВНР", "СМ", "ФТ ((Тианция) код TIA)", "АФ", "САИ", 
            "Ростовская Федерация", "Творчество", "Компании", "Мемы", "РГА", 
            "Войны, СВО, Теракты", "Исторические события", "Военная техника", 
            "Флаги", "ОНР", "ЭСИмгеР", "ЧРИ", "Индрастан", "ЧШО", "Переговорная", 
            "ТДМ", "СШФ", "Рейтинг"
        ];

        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        function createClouds() {
            const cloudsContainer = document.getElementById('clouds');
            for (let i = 0; i < 20; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                cloud.style.width = Math.random() * 100 + 50 + 'px';
                cloud.style.height = Math.random() * 60 + 30 + 'px';
                cloud.style.top = Math.random() * 100 + '%';
                cloud.style.animationDelay = Math.random() * 20 + 's';
                cloud.style.animationDuration = (Math.random() * 30 + 20) + 's';
                cloudsContainer.appendChild(cloud);
            }
        }

        function initChats() {
            const chatsGrid = document.getElementById('chatsGrid');
            chats.forEach(chat => {
                const chatBtn = document.createElement('button');
                chatBtn.className = 'chat-btn';
                chatBtn.textContent = chat;
                chatBtn.onclick = () => openChat(chat);
                chatsGrid.appendChild(chatBtn);
            });
        }

        function openChat(chatName) {
            document.getElementById('currentChatName').textContent = chatName;
            document.getElementById('chatInterface').style.display = 'block';
            document.getElementById('warInterface').style.display = 'none';
            document.getElementById('economyInterface').style.display = 'none';
            document.getElementById('profileInterface').style.display = 'none';
        }

        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.getElementById('themeToggle');
            const stars = document.getElementById('stars');
            const clouds = document.getElementById('clouds');
            
            if (body.classList.contains('dark-theme')) {
                body.classList.remove('dark-theme');
                body.classList.add('light-theme');
                themeToggle.textContent = '☀️';
                stars.style.display = 'none';
                clouds.style.display = 'block';
                tg.setHeaderColor('#3498db');
                tg.backgroundColor = '#3498db';
            } else {
                body.classList.remove('light-theme');
                body.classList.add('dark-theme');
                themeToggle.textContent = '🌙';
                stars.style.display = 'block';
                clouds.style.display = 'none';
                tg.setHeaderColor('#1a237e');
                tg.backgroundColor = '#1a237e';
            }
        }

        document.getElementById('gameForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('name').value,
                age: document.getElementById('age').value,
                location: document.getElementById('location').value,
                countryName: document.getElementById('countryName').value,
                flag: document.getElementById('flag').value,
                currency: document.getElementById('currency').value,
                president: document.getElementById('president').value,
                politics: document.getElementById('politics').value,
                territory: document.getElementById('territory').value,
                capital: document.getElementById('capital').value,
                experience: document.getElementById('experience').value,
                username: document.getElementById('username').value,
                peoples: document.getElementById('peoples').value,
                population: document.getElementById('population').value,
                languages: document.getElementById('languages').value,
                countryCode: document.getElementById('countryCode').value,
                capitalMap: document.getElementById('capitalMap').value,
                timestamp: new Date().toLocaleString('ru-RU')
            };

            const message = `⚡🌍 НОВАЯ АНКЕТА ВПИ 🌍⚡\n\n` +
                          `👤 Имя: ${formData.name}\n` +
                          `🎂 Возраст: ${formData.age}\n` +
                          `📍 Место: ${formData.location}\n` +
                          `🇺🇳 Страна: ${formData.countryName}\n` +
                          `🏛️ Президент: ${formData.president}\n` +
                          `💰 Валюта: ${formData.currency}\n` +
                          `🏙️ Столица: ${formData.capital}\n` +
                          `👥 Население: ${formData.population}\n` +
                          `🗣️ Народы: ${formData.peoples}\n` +
                          `🌐 Языки: ${formData.languages}\n` +
                          `📊 Политика: ${formData.politics}\n` +
                          `🎮 Опыт РП: ${formData.experience}\n` +
                          `🔤 Код страны: ${formData.countryCode}\n` +
                          `📎 Флаг: ${formData.flag || 'Не указан'}\n` +
                          `🗺️ Территория: ${formData.territory || 'Не указана'}\n` +
                          `📍 Карта столицы: ${formData.capitalMap || 'Не указана'}\n` +
                          `🔖 ЮЗ: ${formData.username}\n\n` +
                          `⏰ Время подачи: ${formData.timestamp}\n\n` +
                          `✅ Решение админа: (👍/👎)`;

            window.open(`https://t.me/OksikWizer?text=${encodeURIComponent(message)}`, '_blank');
            
            alert('✅ Анкета отправлена! Ожидайте решения админа @OksikWizer');
            
            this.reset();
        });

        const playBtn = document.getElementById('playBtn');
        const muteBtn = document.getElementById('muteBtn');
        const backgroundMusic = document.getElementById('backgroundMusic');
        let isPlaying = false;
        let isMuted = false;

        playBtn.addEventListener('click', function() {
            if (isPlaying) {
                backgroundMusic.pause();
                playBtn.textContent = '🎵';
                isPlaying = false;
            } else {
                backgroundMusic.play().catch(e => {
                    console.log('Автовоспроизведение заблокировано');
                });
                playBtn.textContent = '⏸️';
                isPlaying = true;
            }
        });

        muteBtn.addEventListener('click', function() {
            if (isMuted) {
                backgroundMusic.muted = false;
                muteBtn.textContent = '🔇';
                muteBtn.classList.remove('muted');
                isMuted = false;
            } else {
                backgroundMusic.muted = true;
                muteBtn.textContent = '🔊';
                muteBtn.classList.add('muted');
                isMuted = true;
            }
        });

        document.getElementById('allChatsBtn').addEventListener('click', function(e) {
            e.preventDefault();
            const chatButtons = document.querySelectorAll('.chat-btn');
            chatButtons.forEach(btn => {
                btn.style.display = btn.style.display === 'none' ? 'block' : 'none';
            });
        });

        document.getElementById('themeToggle').addEventListener('click', toggleTheme);

        createStars();
        createClouds();
        initChats();

        console.log('P.W. Alpha 11.0 loaded successfully!');
    </script>
</body>
</html>